(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chuzushouru/add-or-update"],{"1c59":function(e,t,r){},"28ef":function(e,t,r){"use strict";r.r(t);var i=r("853e"),n=r.n(i);for(var a in i)"default"!==a&&function(e){r.d(t,e,(function(){return i[e]}))}(a);t["default"]=n.a},"853e":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r("a34a"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,i,n,a,u){try{var s=e[a](u),o=s.value}catch(c){return void r(c)}s.done?t(o):Promise.resolve(o).then(i,n)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var u=e.apply(t,r);function s(e){a(u,i,n,s,o,"next",e)}function o(e){a(u,i,n,s,o,"throw",e)}s(void 0)}))}}var s=function(){return Promise.all([r.e("common/vendor"),r.e("components/w-picker/w-picker")]).then(r.bind(null,"e2b1"))},o=function(){return r.e("components/xia-editor/xia-editor").then(r.bind(null,"064f"))},c={data:function(){return{cross:"",ruleForm:{zhuti:"出借收入",chujiezhanghao:"",chujiexingming:"",jine:"",tuihaiyajin:"",shidejine:"",riqi:""},user:{},ro:{zhuti:!1,chujiezhanghao:!1,chujiexingming:!1,jine:!1,tuihaiyajin:!1,shidejine:!1,riqi:!1}}},components:{wPicker:s,xiaEditor:o},computed:{baseUrl:function(){return this.$base.url},shidejine:{get:function(){return 0+parseFloat(this.ruleForm.jine)-this.ruleForm.tuihaiyajin||""}}},onLoad:function(){var t=u(i.default.mark((function t(r){var n,a,u,s;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.ruleForm.riqi=this.$utils.getCurDate(),n=e.getStorageSync("nowTable"),t.next=4,this.$api.session(n);case 4:if(a=t.sent,this.user=a.data,this.ruleForm.userid=e.getStorageSync("userid"),r.refid&&(this.ruleForm.refid=r.refid,this.ruleForm.nickname=e.getStorageSync("nickname")),!r.id){t.next=14;break}return this.ruleForm.id=r.id,t.next=12,this.$api.info("chuzushouru",this.ruleForm.id);case 12:a=t.sent,this.ruleForm=a.data;case 14:if(this.cross=r.cross,!r.cross){t.next=52;break}u=e.getStorageSync("crossObj"),t.t0=i.default.keys(u);case 18:if((t.t1=t.t0()).done){t.next=50;break}if(s=t.t1.value,"zhuti"!=s){t.next=24;break}return this.ruleForm.zhuti=u[s],this.ro.zhuti=!0,t.abrupt("continue",18);case 24:if("chujiezhanghao"!=s){t.next=28;break}return this.ruleForm.chujiezhanghao=u[s],this.ro.chujiezhanghao=!0,t.abrupt("continue",18);case 28:if("chujiexingming"!=s){t.next=32;break}return this.ruleForm.chujiexingming=u[s],this.ro.chujiexingming=!0,t.abrupt("continue",18);case 32:if("jine"!=s){t.next=36;break}return this.ruleForm.jine=u[s],this.ro.jine=!0,t.abrupt("continue",18);case 36:if("tuihaiyajin"!=s){t.next=40;break}return this.ruleForm.tuihaiyajin=u[s],this.ro.tuihaiyajin=!0,t.abrupt("continue",18);case 40:if("shidejine"!=s){t.next=44;break}return this.ruleForm.shidejine=u[s],this.ro.shidejine=!0,t.abrupt("continue",18);case 44:if("riqi"!=s){t.next=48;break}return this.ruleForm.riqi=u[s],this.ro.riqi=!0,t.abrupt("continue",18);case 48:t.next=18;break;case 50:this.ruleForm.shidejine=0,this.ro.shidejine=!1;case 52:this.styleChange();case 53:case"end":return t.stop()}}),t,this)})));function r(e){return t.apply(this,arguments)}return r}(),methods:{styleChange:function(){this.$nextTick((function(){}))},riqiChange:function(e){this.ruleForm.riqi=e.target.value,this.$forceUpdate()},getUUID:function(){return(new Date).getTime()},onSubmitTap:function(){var t=u(i.default.mark((function t(){var r,n,a,u,s,o,c,h,l,d;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.ruleForm.shidejine=this.shidejine,this.ruleForm.jine){t.next=4;break}return this.$utils.msg("金额不能为空"),t.abrupt("return");case 4:if(!this.ruleForm.jine||this.$validate.isIntNumer(this.ruleForm.jine)){t.next=7;break}return this.$utils.msg("金额应输入整数"),t.abrupt("return");case 7:if(this.ruleForm.tuihaiyajin){t.next=10;break}return this.$utils.msg("退还压金不能为空"),t.abrupt("return");case 10:if(this.ruleForm.shidejine){t.next=13;break}return this.$utils.msg("实得金额不能为空"),t.abrupt("return");case 13:if(!this.cross){t.next=29;break}if(s=e.getStorageSync("statusColumnName"),o=e.getStorageSync("statusColumnValue"),""==s){t.next=29;break}if(r||(r=e.getStorageSync("crossObj")),s.startsWith("[")){t.next=25;break}for(c in r)c==s&&(r[c]=o);return h=e.getStorageSync("crossTable"),t.next=23,this.$api.update("".concat(h),r);case 23:t.next=29;break;case 25:n=Number(e.getStorageSync("userid")),a=r["id"],u=e.getStorageSync("statusColumnName"),u=u.replace(/\[/,"").replace(/\]/,"");case 29:if(!a||!n){t.next=56;break}return this.ruleForm.crossuserid=n,this.ruleForm.crossrefid=a,l={page:1,limit:10,crossuserid:n,crossrefid:a},t.next=35,this.$api.list("chuzushouru",l);case 35:if(d=t.sent,!(d.data.total>=u)){t.next=41;break}return this.$utils.msg(e.getStorageSync("tips")),t.abrupt("return",!1);case 41:return r||(r=e.getStorageSync("crossObj")),h=e.getStorageSync("crossTable"),r.shidejine=parseFloat(r.shidejine)+parseFloat(this.ruleForm.shidejine),t.next=46,this.$api.update("".concat(h),r);case 46:if(!this.ruleForm.id){t.next=51;break}return t.next=49,this.$api.update("chuzushouru",this.ruleForm);case 49:t.next=53;break;case 51:return t.next=53,this.$api.add("chuzushouru",this.ruleForm);case 53:this.$utils.msgBack("提交成功");case 54:t.next=69;break;case 56:return r||(r=e.getStorageSync("crossObj")),h=e.getStorageSync("crossTable"),r.shidejine=parseFloat(r.shidejine)+parseFloat(this.ruleForm.shidejine),t.next=61,this.$api.update("".concat(h),r);case 61:if(!this.ruleForm.id){t.next=66;break}return t.next=64,this.$api.update("chuzushouru",this.ruleForm);case 64:t.next=68;break;case 66:return t.next=68,this.$api.add("chuzushouru",this.ruleForm);case 68:this.$utils.msgBack("提交成功");case 69:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}(),optionsChange:function(e){this.index=e.target.value},bindDateChange:function(e){this.date=e.target.value},getDate:function(e){var t=new Date,r=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return"start"===e?r-=60:"end"===e&&(r+=2),i=i>9?i:"0"+i,n=n>9?n:"0"+n,"".concat(r,"-").concat(i,"-").concat(n)},toggleTab:function(e){this.$refs[e].show()}}};t.default=c}).call(this,r("543d")["default"])},"86a1":function(e,t,r){"use strict";(function(e){r("6cdc"),r("921b");i(r("66fd"));var t=i(r("dc38"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},9080:function(e,t,r){"use strict";var i,n=function(){var e=this,t=e.$createElement;e._self._c},a=[];r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return i}))},dc38:function(e,t,r){"use strict";r.r(t);var i=r("9080"),n=r("28ef");for(var a in n)"default"!==a&&function(e){r.d(t,e,(function(){return n[e]}))}(a);r("ecfb");var u,s=r("f0c5"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"3cc40b9a",null,!1,i["a"],u);t["default"]=o.exports},ecfb:function(e,t,r){"use strict";var i=r("1c59"),n=r.n(i);n.a}},[["86a1","common/runtime","common/vendor"]]]);